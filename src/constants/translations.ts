import { Language } from '../types';

export const MAX_LEVEL = 12;
export const DEFAULT_LEVEL = 5;
export const MAX_DAILY_GENERATIONS = 3;

export const API_BASE_URL = process.env.EXPO_PUBLIC_API_URL || 'https://gacha-travel--s8869420.replit.app';

export const CATEGORY_COLORS: Record<string, string> = {
  food: '#ea580c',
  stay: '#0891b2',
  education: '#7c3aed',
  entertainment: '#db2777',
  scenery: '#10b981',
  shopping: '#f59e0b',
  activity: '#84cc16',
  experience: '#f59e0b',
};

export const TRANSLATIONS: Record<Language, Record<string, string>> = {
  'zh-TW': {
    dailyLimitReached: '今日額度已達上限',
    dailyLimitReachedDesc: '每日最多生成 3 次行程。請明天再來！',
    appTitle: '行程扭蛋',
    appSubtitle: '今天去哪玩?老天說了算',
    destination: '目的地',
    selectDestination: '選擇目的地',
    city: '城市',
    selectCity: '選擇城市',
    startGacha: '開始扭蛋',
    generating: '生成中...',
    findingGems: '正在尋找隱藏景點',
    tripLevel: 'Lv.{level} 之旅',
    spotsCount: '{count} 個景點',
    couponUnlocked: '獲得優惠券',
    specialPromo: '特惠活動',
    noCollection: '尚未有收藏',
    startToCollect: '開始扭蛋來收集景點！',
    noCoupons: '尚未有優惠券',
    navHome: '首頁',
    navGacha: '扭蛋',
    navGachaModule: '行程扭蛋',
    navPlanner: '策劃師',
    navPlannerModule: '旅程策劃',
    navCollection: '圖鑑',
    navMyBox: '道具箱',
    navItems: '道具箱',
    navSettings: '設定',
    navLocation: '定位',
    navItinerary: '行程',
    navChat: '聊天',
    navService: '服務',
    back: '返回',
    loading: '載入中...',
    login: '登入',
    signInReplit: '使用 Replit 登入',
    guestLogin: '訪客登入',
    welcomeBack: '歡迎回來',
    backToHome: '返回首頁',
    catFood: '美食',
    catStay: '住宿',
    catScenery: '景點',
    catShopping: '購物',
    catEntertainment: '娛樂',
    catEducation: '文化',
    catActivity: '活動',
    relaxed: '悠閒',
    packed: '充實',
    selectCountry: '請選擇國家',
    selectRegion: '請選擇城市/地區',
    itineraryPace: '行程節奏',
    stops: '站',
    viewOnMap: '在 Google 地圖中查看',
    rePull: '重新扭蛋',
    places: '個地點',
    myCollection: '我的圖鑑',
    spots: '個地點',
    announcements: '公告',
    flashEvents: '快閃活動',
    explore: '探索',
    shareLocationToPlanner: '分享位置給策劃師',
    yourLocation: '你的位置',
    planner: '策劃師',
    safetyCenter: '安全中心',
    safetyCenterDesc: '設定緊急求救功能，確保旅途安全',
    safety: '安全',
    setupEmergencySOS: '設定緊急求救功能',
    iosShortcutsIntegration: 'iOS 捷徑整合',
    iosShortcutsDesc: '將以下連結加入 iOS 捷徑 App，即可透過 Siri 或自動化快速觸發求救訊號',
    webhookUrl: 'Webhook URL (POST)',
    notAvailable: '尚未取得連結',
    copyLink: '複製連結',
    copied: '已複製',
    setupSteps: '設定步驟：',
    step1: '1. 開啟 iOS 捷徑 App',
    step2: '2. 建立新捷徑，加入「取得 URL 內容」動作',
    step3: '3. 貼上上方 Webhook URL',
    step4: '4. 將方法設為「POST」',
    step5: '5. 設定 Siri 語音指令或自動化觸發',
    emergencyNow: '立即求救',
    emergencyNowDesc: '按下按鈕立即發送求救訊號，通知您的緊急聯絡人',
    sosButton: 'SOS 求救',
    confirmSOS: '確認發送 SOS',
    confirmSOSDesc: '確定要發送緊急求救訊號嗎？',
    cancel: '取消',
    confirmSend: '確定發送',
    sent: '已發送',
    sosSuccess: 'SOS 求救訊號已成功發送',
    sendFailed: '發送失敗',
    tryAgainLater: '請稍後再試',
    networkError: '網路連線錯誤，請檢查網路',
    gettingLocation: '正在取得位置...',
    locationPermissionRequired: '需要位置權限才能使用此功能',
    unableToGetLocation: '無法取得位置',
    retry: '重試',
    viewPool: '查看獎池',
    poolPreview: '獎池預覽',
    pullCount: '抽取張數',
    selectDistrict: '選擇行政區',
    rareItems: '稀有道具',
    noRareItems: '此區域尚無稀有道具',
    closeModal: '關閉',
    pulls: '張',
    loadingPool: '載入獎池中...',
    merchant: '特約商家',
    generatingItinerary: '正在生成行程...',
    sponsorAd: '贊助商廣告 (模擬)',
    pleaseWait: '請稍候',
    almostReady: '即將完成',
    gachaResults: '扭蛋結果',
    addToBackpack: '加入背包',
    addedToBackpack: '已加入背包',
    gotCoupon: '獲得優惠券！',
    partnerMerchant: '特約商家',
    rating: '評分',
    noResults: '尚無結果',
    tryGachaFirst: '先來一發扭蛋吧！',
    viewResults: '查看結果',
    exploring: '正在探索',
    reGacha: '重新扭蛋',
    emptyItemBox: '道具箱是空的',
    collectItemsFirst: '先去扭蛋收集一些景點吧！',
    totalItems: '共',
    itemsCount: '個道具',
  },
  'en': {
    dailyLimitReached: 'Daily Limit Reached',
    dailyLimitReachedDesc: 'You can generate up to 3 itineraries per day. Come back tomorrow!',
    appTitle: 'MIBU TRIP',
    appSubtitle: 'AI Travel Gacha',
    destination: 'Destination',
    selectDestination: 'Select Destination',
    city: 'City',
    selectCity: 'Select City',
    startGacha: 'START GACHA',
    generating: 'Generating...',
    findingGems: 'Finding hidden gems',
    tripLevel: 'Level {level} Trip',
    spotsCount: '{count} Spots',
    couponUnlocked: 'Coupon Unlocked',
    specialPromo: 'Special Promo',
    noCollection: 'No collection yet.',
    startToCollect: 'Start gacha to collect spots!',
    noCoupons: 'No coupons yet.',
    navHome: 'Home',
    navGacha: 'Gacha',
    navGachaModule: 'Travel Gacha',
    navPlanner: 'Planner',
    navPlannerModule: 'Trip Planner',
    navCollection: 'Collection',
    navMyBox: 'My Box',
    navItems: 'Items',
    navSettings: 'Settings',
    navLocation: 'Location',
    navItinerary: 'Itinerary',
    navChat: 'Chat',
    navService: 'Service',
    back: 'Back',
    loading: 'Loading...',
    login: 'Login',
    signInReplit: 'Sign in with Replit',
    guestLogin: 'Guest Login',
    welcomeBack: 'Welcome Back',
    backToHome: 'Back to Home',
    catFood: 'Food',
    catStay: 'Stay',
    catScenery: 'Scenery',
    catShopping: 'Shopping',
    catEntertainment: 'Entertainment',
    catEducation: 'Culture',
    catActivity: 'Activity',
    relaxed: 'Relaxed',
    packed: 'Packed',
    selectCountry: 'Select Country',
    selectRegion: 'Select City/Region',
    itineraryPace: 'Itinerary Pace',
    stops: 'Stops',
    viewOnMap: 'View on Google Maps',
    rePull: 'Re-pull',
    places: 'places',
    myCollection: 'My Collection',
    spots: 'spots',
    announcements: 'Announcements',
    flashEvents: 'Flash Events',
    explore: 'Explore',
    shareLocationToPlanner: 'Share location with planner',
    yourLocation: 'Your location',
    planner: 'Planner',
    safetyCenter: 'Safety Center',
    safetyCenterDesc: 'Set up emergency SOS to stay safe during your trip',
    safety: 'Safety',
    setupEmergencySOS: 'Set up emergency SOS',
    iosShortcutsIntegration: 'iOS Shortcuts Integration',
    iosShortcutsDesc: 'Add the link below to iOS Shortcuts app to quickly trigger SOS via Siri or automation',
    webhookUrl: 'Webhook URL (POST)',
    notAvailable: 'Link not available',
    copyLink: 'Copy Link',
    copied: 'Copied',
    setupSteps: 'Setup Steps:',
    step1: '1. Open iOS Shortcuts app',
    step2: '2. Create new shortcut, add "Get Contents of URL" action',
    step3: '3. Paste the Webhook URL above',
    step4: '4. Set method to "POST"',
    step5: '5. Set up Siri voice command or automation trigger',
    emergencyNow: 'Emergency Now',
    emergencyNowDesc: 'Press the button to immediately send an SOS signal to your emergency contacts',
    sosButton: 'SOS Emergency',
    confirmSOS: 'Confirm SOS',
    confirmSOSDesc: 'Are you sure you want to send an emergency SOS signal?',
    cancel: 'Cancel',
    confirmSend: 'Confirm Send',
    sent: 'Sent',
    sosSuccess: 'SOS signal has been sent successfully',
    sendFailed: 'Send Failed',
    tryAgainLater: 'Please try again later',
    networkError: 'Network error, please check your connection',
    gettingLocation: 'Getting location...',
    locationPermissionRequired: 'Location permission is required to use this feature',
    unableToGetLocation: 'Unable to get location',
    retry: 'Retry',
    viewPool: 'View Pool',
    poolPreview: 'Pool Preview',
    pullCount: 'Pull Count',
    selectDistrict: 'Select District',
    rareItems: 'Rare Items',
    noRareItems: 'No rare items in this area',
    closeModal: 'Close',
    pulls: 'pulls',
    loadingPool: 'Loading pool...',
    merchant: 'Partner',
    generatingItinerary: 'Generating itinerary...',
    sponsorAd: 'Sponsored Ad (Demo)',
    pleaseWait: 'Please wait',
    almostReady: 'Almost ready',
    gachaResults: 'Gacha Results',
    addToBackpack: 'Add to Backpack',
    addedToBackpack: 'Added!',
    gotCoupon: 'Got Coupon!',
    partnerMerchant: 'Partner',
    rating: 'Rating',
    noResults: 'No Results Yet',
    tryGachaFirst: 'Try gacha first!',
    viewResults: 'View Results',
    exploring: 'Exploring',
    reGacha: 'Re-Gacha',
    emptyItemBox: 'Item Box is Empty',
    collectItemsFirst: 'Start pulling gacha to collect spots!',
    totalItems: 'Total',
    itemsCount: 'items',
  },
  'ja': {
    dailyLimitReached: '本日の上限に達しました',
    dailyLimitReachedDesc: '1日3回まで生成可能です。また明日お越しください！',
    appTitle: 'MIBU 旅ガチャ',
    appSubtitle: 'AI トラベルガチャ',
    destination: '目的地',
    selectDestination: '目的地を選択',
    city: '都市',
    selectCity: '都市を選択',
    startGacha: 'ガチャを回す',
    generating: '生成中...',
    findingGems: '隠れた名店を探しています',
    tripLevel: 'Lv.{level} の旅',
    spotsCount: '{count} スポット',
    couponUnlocked: 'クーポン獲得',
    specialPromo: '限定プロモ',
    noCollection: 'コレクションはまだありません',
    startToCollect: 'ガチャを回してスポットを集めよう！',
    noCoupons: 'クーポンはまだありません',
    navHome: 'ホーム',
    navGacha: 'ガチャ',
    navGachaModule: '旅程ガチャ',
    navPlanner: 'プランナー',
    navPlannerModule: '旅行プランナー',
    navCollection: '図鑑',
    navMyBox: '道具箱',
    navItems: '道具箱',
    navSettings: '設定',
    navLocation: '位置',
    navItinerary: '旅程',
    navChat: 'チャット',
    navService: 'サービス',
    back: '戻る',
    loading: '読み込み中...',
    login: 'ログイン',
    signInReplit: 'Replitでログイン',
    guestLogin: 'ゲストログイン',
    welcomeBack: 'おかえりなさい',
    backToHome: 'ホームに戻る',
    catFood: 'グルメ',
    catStay: '宿泊',
    catScenery: '観光',
    catShopping: 'ショッピング',
    catEntertainment: 'エンタメ',
    catEducation: '文化',
    catActivity: 'アクティビティ',
    relaxed: 'ゆったり',
    packed: '充実',
    selectCountry: '国を選択',
    selectRegion: '都市/地域を選択',
    itineraryPace: '行程のペース',
    stops: 'スポット',
    viewOnMap: 'Google マップで見る',
    rePull: '再ガチャ',
    places: 'スポット',
    myCollection: 'マイ図鑑',
    spots: 'スポット',
    announcements: 'お知らせ',
    flashEvents: 'フラッシュイベント',
    explore: '探索',
    shareLocationToPlanner: 'プランナーに位置を共有',
    yourLocation: 'あなたの位置',
    planner: 'プランナー',
    safetyCenter: '安全センター',
    safetyCenterDesc: '旅の安全を確保するため緊急SOSを設定',
    safety: '安全',
    setupEmergencySOS: '緊急SOSを設定',
    iosShortcutsIntegration: 'iOSショートカット連携',
    iosShortcutsDesc: '以下のリンクをiOSショートカットに追加して、Siriや自動化でSOSを素早く発信',
    webhookUrl: 'Webhook URL (POST)',
    notAvailable: 'リンクが取得できません',
    copyLink: 'リンクをコピー',
    copied: 'コピーしました',
    setupSteps: '設定手順：',
    step1: '1. iOSショートカットアプリを開く',
    step2: '2. 新しいショートカットを作成し「URLの内容を取得」を追加',
    step3: '3. 上記のWebhook URLを貼り付け',
    step4: '4. メソッドを「POST」に設定',
    step5: '5. Siri音声コマンドまたは自動化トリガーを設定',
    emergencyNow: '今すぐ緊急通報',
    emergencyNowDesc: 'ボタンを押すとすぐに緊急連絡先にSOSシグナルを送信します',
    sosButton: 'SOS緊急通報',
    confirmSOS: 'SOS確認',
    confirmSOSDesc: '緊急SOSシグナルを送信してもよろしいですか？',
    cancel: 'キャンセル',
    confirmSend: '送信確認',
    sent: '送信済み',
    sosSuccess: 'SOSシグナルが正常に送信されました',
    sendFailed: '送信失敗',
    tryAgainLater: '後でもう一度お試しください',
    networkError: 'ネットワークエラーです。接続を確認してください',
    gettingLocation: '位置を取得中...',
    locationPermissionRequired: 'この機能を使用するには位置情報の許可が必要です',
    unableToGetLocation: '位置を取得できません',
    retry: '再試行',
    viewPool: 'ガチャ確率を見る',
    poolPreview: 'ガチャプール',
    pullCount: '抽選回数',
    selectDistrict: 'エリアを選択',
    rareItems: 'レアアイテム',
    noRareItems: 'このエリアにはレアアイテムがありません',
    closeModal: '閉じる',
    pulls: '回',
    loadingPool: 'プール読み込み中...',
    merchant: '提携店舗',
    generatingItinerary: '旅程を生成中...',
    sponsorAd: 'スポンサー広告 (デモ)',
    pleaseWait: 'お待ちください',
    almostReady: 'もうすぐ完了',
    gachaResults: 'ガチャ結果',
    addToBackpack: 'リュックに追加',
    addedToBackpack: '追加しました！',
    gotCoupon: 'クーポン獲得！',
    partnerMerchant: '提携店舗',
    rating: '評価',
    noResults: 'まだ結果がありません',
    tryGachaFirst: 'まずガチャを回してみよう！',
    viewResults: '結果を見る',
  },
  'ko': {
    dailyLimitReached: '일일 한도 도달',
    dailyLimitReachedDesc: '하루에 최대 3개의 여행 일정을 생성할 수 있습니다. 내일 다시 와주세요!',
    appTitle: 'MIBU 트립',
    appSubtitle: 'AI 여행 가챠',
    destination: '목적지',
    selectDestination: '목적지 선택',
    city: '도시',
    selectCity: '도시 선택',
    startGacha: '가챠 시작',
    generating: '생성 중...',
    findingGems: '숨겨진 명소를 찾는 중',
    tripLevel: 'Lv.{level} 여행',
    spotsCount: '{count}개 장소',
    couponUnlocked: '쿠폰 획득',
    specialPromo: '특별 프로모션',
    noCollection: '아직 컬렉션이 없습니다.',
    startToCollect: '가챠를 돌려 장소를 수집하세요!',
    noCoupons: '아직 쿠폰이 없습니다.',
    navHome: '홈',
    navGacha: '가챠',
    navGachaModule: '여행 가챠',
    navPlanner: '플래너',
    navPlannerModule: '여행 플래너',
    navCollection: '도감',
    navMyBox: '보관함',
    navItems: '보관함',
    navSettings: '설정',
    navLocation: '위치',
    navItinerary: '일정',
    navChat: '채팅',
    navService: '서비스',
    back: '뒤로',
    loading: '로딩 중...',
    login: '로그인',
    signInReplit: 'Replit으로 로그인',
    guestLogin: '게스트 로그인',
    welcomeBack: '환영합니다',
    backToHome: '홈으로 돌아가기',
    catFood: '맛집',
    catStay: '숙박',
    catScenery: '관광',
    catShopping: '쇼핑',
    catEntertainment: '엔터테인먼트',
    catEducation: '문화',
    catActivity: '액티비티',
    relaxed: '여유로운',
    packed: '알찬',
    selectCountry: '국가 선택',
    selectRegion: '도시/지역 선택',
    itineraryPace: '일정 페이스',
    stops: '스톱',
    viewOnMap: 'Google 지도에서 보기',
    rePull: '다시 뽑기',
    places: '장소',
    myCollection: '내 도감',
    spots: '장소',
    announcements: '공지사항',
    flashEvents: '플래시 이벤트',
    explore: '탐색',
    shareLocationToPlanner: '플래너에게 위치 공유',
    yourLocation: '내 위치',
    planner: '플래너',
    safetyCenter: '안전 센터',
    safetyCenterDesc: '여행 중 안전을 위해 긴급 SOS 설정',
    safety: '안전',
    setupEmergencySOS: '긴급 SOS 설정',
    iosShortcutsIntegration: 'iOS 단축어 연동',
    iosShortcutsDesc: '아래 링크를 iOS 단축어에 추가하여 Siri나 자동화로 빠르게 SOS 발신',
    webhookUrl: 'Webhook URL (POST)',
    notAvailable: '링크를 가져올 수 없습니다',
    copyLink: '링크 복사',
    copied: '복사됨',
    setupSteps: '설정 단계:',
    step1: '1. iOS 단축어 앱 열기',
    step2: '2. 새 단축어 만들고 "URL 콘텐츠 가져오기" 추가',
    step3: '3. 위의 Webhook URL 붙여넣기',
    step4: '4. 메서드를 "POST"로 설정',
    step5: '5. Siri 음성 명령 또는 자동화 트리거 설정',
    emergencyNow: '지금 긴급 요청',
    emergencyNowDesc: '버튼을 누르면 긴급 연락처에 SOS 신호를 즉시 보냅니다',
    sosButton: 'SOS 긴급',
    confirmSOS: 'SOS 확인',
    confirmSOSDesc: '긴급 SOS 신호를 보내시겠습니까?',
    cancel: '취소',
    confirmSend: '보내기 확인',
    sent: '전송됨',
    sosSuccess: 'SOS 신호가 성공적으로 전송되었습니다',
    sendFailed: '전송 실패',
    tryAgainLater: '나중에 다시 시도해주세요',
    networkError: '네트워크 오류, 연결을 확인하세요',
    gettingLocation: '위치 가져오는 중...',
    locationPermissionRequired: '이 기능을 사용하려면 위치 권한이 필요합니다',
    unableToGetLocation: '위치를 가져올 수 없습니다',
    retry: '다시 시도',
    viewPool: '가챠 확인',
    poolPreview: '가챠 풀',
    pullCount: '뽑기 횟수',
    selectDistrict: '지역 선택',
    rareItems: '레어 아이템',
    noRareItems: '이 지역에는 레어 아이템이 없습니다',
    closeModal: '닫기',
    pulls: '장',
    loadingPool: '풀 로딩 중...',
    merchant: '파트너',
    generatingItinerary: '일정 생성 중...',
    sponsorAd: '스폰서 광고 (데모)',
    pleaseWait: '잠시만 기다려주세요',
    almostReady: '거의 완료',
    gachaResults: '가챠 결과',
    addToBackpack: '배낭에 추가',
    addedToBackpack: '추가됨!',
    gotCoupon: '쿠폰 획득!',
    partnerMerchant: '파트너',
    rating: '평점',
    noResults: '아직 결과가 없습니다',
    tryGachaFirst: '먼저 가챠를 뽑아보세요!',
    viewResults: '결과 보기',
  },
};

export const getCategoryLabel = (category: string, language: Language): string => {
  const labels: Record<string, Record<Language, string>> = {
    food: { 'zh-TW': '美食', en: 'Food', ja: 'グルメ', ko: '맛집' },
    stay: { 'zh-TW': '住宿', en: 'Stay', ja: '宿泊', ko: '숙박' },
    education: { 'zh-TW': '生態文化', en: 'Culture', ja: '文化', ko: '문화' },
    entertainment: { 'zh-TW': '娛樂', en: 'Fun', ja: '娯楽', ko: '놀이' },
    scenery: { 'zh-TW': '景點', en: 'Scenery', ja: '景色', ko: '명소' },
    shopping: { 'zh-TW': '購物', en: 'Shop', ja: '買物', ko: '쇼핑' },
    activity: { 'zh-TW': '體驗', en: 'Activity', ja: '体験', ko: '체험' },
    experience: { 'zh-TW': '體驗', en: 'Experience', ja: '体験', ko: '체험' },
  };
  const categoryKey = category?.toLowerCase() || '';
  return labels[categoryKey]?.[language] || labels[categoryKey]?.['zh-TW'] || category || '';
};

export const getCategoryColor = (category: string): string => {
  return CATEGORY_COLORS[category?.toLowerCase()] || '#6366f1';
};
