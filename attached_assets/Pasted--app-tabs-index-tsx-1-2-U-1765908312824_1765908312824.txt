好的，现在请打开 `app/(tabs)/index.tsx` 档案，并使用以下程式码**完整地取代**档案中现有的全部内容。

这个新版本将会：
1. 移除旧的静态文字。
2. 建立新的 UI 布局来显示公告和活动。
3. 在画面载入时，自动呼叫 `getHomeContent` API 来获取并显示最新资料。
app/(tabs)/index.tsx 的完整程式码
code
TypeScript
import React, { useState, useEffect } from 'react';
import { View, Text, StyleSheet, ScrollView, ActivityIndicator, RefreshControl } from 'react-native';
import { SafeAreaView } from 'react-native-safe-area-context';

// 假设你的 API 服务和型别定义在这里
import { getHomeContent, HomeContentResponse, Announcement, AppEvent } from '../../src/lib/api'; 
// 假设你的翻译 hook 在这里
import { useApp } from '../../src/context/AppContext'; 

// 公告卡片元件
const AnnouncementCard = ({ item }: { item: Announcement }) => (
  <View style={styles.card}>
    <Text style={styles.cardTag}>公告</Text>
    <Text style={styles.cardContent}>{item.content}</Text>
  </View>
);

// 活动卡片元件
const EventCard = ({ item }: { item: AppEvent }) => (
  <View style={[styles.card, styles.eventCard]}>
    <Text style={styles.cardTag}>{item.eventType === 'flash' ? '快闪活动' : '节日限定'}</Text>
    <Text style={styles.cardTitle}>{item.title}</Text>
    <Text style={styles.cardContent}>{item.content}</Text>
  </View>
);

export default function HomeScreen() {
  const { t } = useApp(); // 获取翻译函式
  const [homeData, setHomeData] = useState<HomeContentResponse | null>(null);
  const [isLoading, setIsLoading] = useState(true);
  const [error, setError] = useState<string | null>(null);
  const [isRefreshing, setIsRefreshing] = useState(false);

  // 资料获取函式
  const fetchHomeData = async () => {
    try {
      setError(null);
      const data = await getHomeContent();
      setHomeData(data);
    } catch (err) {
      setError('无法载入首页资料，请稍后再试。');
      console.error(err);
    } finally {
      setIsLoading(false);
      setIsRefreshing(false);
    }
  };

  // 在元件首次载入时获取资料
  useEffect(() => {
    fetchHomeData();
  }, []);

  // 下拉刷新逻辑
  const onRefresh = () => {
    setIsRefreshing(true);
    fetchHomeData();
  };

  // 根据载入状态显示不同内容
  if (isLoading) {
    return (
      <SafeAreaView style={styles.centerContainer}>
        <ActivityIndicator size="large" />
      </SafeAreaView>
    );
  }

  return (
    <SafeAreaView style={styles.container}>
      <ScrollView
        contentContainerStyle={styles.scrollContent}
        refreshControl={<RefreshControl refreshing={isRefreshing} onRefresh={onRefresh} />}
      >
        <Text style={styles.headerTitle}>最新动态</Text>

        {error && <Text style={styles.errorText}>{error}</Text>}

        {!homeData || (homeData.announcements.length === 0 && homeData.events.length === 0) && !error && (
          <Text style={styles.emptyText}>目前没有新的动态。</Text>
        )}

        {/* 渲染活动列表 */}
        {homeData?.events.map(event => <EventCard key={`event-${event.id}`} item={event} />)}
        
        {/* 渲染公告列表 */}
        {homeData?.announcements.map(announcement => <AnnouncementCard key={`announcement-${announcement.id}`} item={announcement} />)}
        
      </ScrollView>
    </SafeAreaView>
  );
}

// 样式表 (可以根据你的设计系统调整)
const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: '#f5f5f5',
  },
  centerContainer: {
    flex: 1,
    justifyContent: 'center',
    alignItems: 'center',
  },
  scrollContent: {
    padding: 16,
  },
  headerTitle: {
    fontSize: 28,
    fontWeight: 'bold',
    marginBottom: 20,
    color: '#333',
  },
  card: {
    backgroundColor: 'white',
    borderRadius: 12,
    padding: 16,
    marginBottom: 16,
    shadowColor: '#000',
    shadowOffset: { width: 0, height: 2 },
    shadowOpacity: 0.1,
    shadowRadius: 4,
    elevation: 3,
  },
  eventCard: {
    borderColor: '#8A2BE2',
    borderWidth: 1,
  },
  cardTag: {
    position: 'absolute',
    top: -10,
    left: 12,
    backgroundColor: '#8A2BE2',
    color: 'white',
    paddingHorizontal: 8,
    paddingVertical: 2,
    borderRadius: 8,
    fontSize: 12,
    fontWeight: 'bold',
    overflow: 'hidden',
  },
  cardTitle: {
    fontSize: 18,
    fontWeight: 'bold',
    marginBottom: 8,
    marginTop: 10, // To avoid overlap with tag
    color: '#444',
  },
  cardContent: {
    fontSize: 14,
    color: '#666',
    lineHeight: 20,
  },
  errorText: {
    color: 'red',
    textAlign: 'center',
    marginBottom: 16,
  },
  emptyText: {
    color: '#888',
    textAlign: 'center',
    marginTop: 40,
  },
});