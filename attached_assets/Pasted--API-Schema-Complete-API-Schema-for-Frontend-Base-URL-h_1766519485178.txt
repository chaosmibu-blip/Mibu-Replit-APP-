ç›¤é»å®Œæˆï¼ä»¥ä¸‹æ˜¯å®Œæ•´çš„ API Schema äº¤æ¥æ–‡ä»¶ï¼š

ğŸ“‹ Complete API Schema for Frontend
Base URL: https://gacha-travel--s8869420.replit.app
èªè­‰æ–¹å¼: Authorization: Bearer <token> (æ¨™è¨˜ âœ… çš„ç«¯é»éœ€è¦)
æ—¥æœŸ: 2024-12-23
ç¸½è¨ˆ: 96 å€‹ API ç«¯é»

1. èªè­‰ Authentication (9 endpoints)
[
  {
    "method": "POST",
    "endpoint": "/api/auth/register",
    "auth": false,
    "description": "æ—…å®¢è¨»å†Š",
    "request": {
      "email": "string (required)",
      "password": "string (min 8 chars, required)",
      "firstName": "string (optional)",
      "lastName": "string (optional)"
    },
    "response": {
      "success": "boolean",
      "token": "string",
      "user": { "id": "string", "email": "string", "role": "traveler" }
    }
  },
  {
    "method": "POST",
    "endpoint": "/api/auth/register/merchant",
    "auth": false,
    "description": "å•†å®¶è¨»å†Š (éœ€å¯©æ ¸)",
    "request": {
      "email": "string (required)",
      "password": "string (min 6 chars, required)",
      "businessName": "string (required)",
      "contactName": "string (required)",
      "taxId": "string (optional)",
      "businessCategory": "string (required)",
      "address": "string (required)",
      "otherContact": "string (optional)"
    },
    "response": {
      "success": true,
      "message": "å·²æ”¶åˆ°æ‚¨çš„ç”³è«‹ï¼Œç«‹é¦¬ç‚ºæ‚¨è™•ç†",
      "user": { "id": "string", "email": "string", "role": "merchant", "isApproved": false }
    }
  },
  {
    "method": "POST",
    "endpoint": "/api/auth/register/specialist",
    "auth": false,
    "description": "å°ˆå“¡è¨»å†Š (éœ€å¯©æ ¸)",
    "request": {
      "email": "string (required)",
      "password": "string (min 6 chars, required)",
      "name": "string (required)",
      "otherContact": "string (optional)",
      "serviceRegion": "string (optional)"
    },
    "response": {
      "success": true,
      "message": "å·²æ”¶åˆ°æ‚¨çš„ç”³è«‹ï¼Œç«‹é¦¬ç‚ºæ‚¨è™•ç†",
      "user": { "id": "string", "email": "string", "role": "specialist", "isApproved": false }
    }
  },
  {
    "method": "POST",
    "endpoint": "/api/auth/login",
    "auth": false,
    "description": "Email ç™»å…¥",
    "request": {
      "email": "string (required)",
      "password": "string (required)"
    },
    "response": {
      "token": "string (JWT, 7å¤©æœ‰æ•ˆ)",
      "user": { "id": "string", "email": "string", "firstName": "string|null", "lastName": "string|null", "role": "string" }
    }
  },
  {
    "method": "POST",
    "endpoint": "/api/auth/apple",
    "auth": false,
    "description": "Apple Sign In",
    "request": {
      "identityToken": "string (required) - Apple JWT",
      "user": "string (required) - Apple User ID",
      "portal": "string|null (optional) - 'traveler'|'merchant'|'specialist'|'admin'",
      "targetPortal": "string|null (optional) - same as portal",
      "email": "string|null (optional) - Apple åªåœ¨é¦–æ¬¡æä¾›",
      "fullName": {
        "givenName": "string|null (optional)",
        "familyName": "string|null (optional)"
      }
    },
    "response": {
      "success": true,
      "token": "string (JWT, 7å¤©æœ‰æ•ˆ)",
      "user": {
        "id": "string (æ ¼å¼: apple_{appleUserId})",
        "email": "string",
        "name": "string",
        "role": "string",
        "isApproved": "boolean",
        "isSuperAdmin": "boolean"
      }
    }
  },
  {
    "method": "GET",
    "endpoint": "/api/auth/user",
    "auth": true,
    "description": "å–å¾—ç•¶å‰ç”¨æˆ¶è³‡è¨Š",
    "request": null,
    "response": {
      "id": "string",
      "email": "string",
      "firstName": "string|null",
      "lastName": "string|null",
      "role": "'traveler'|'merchant'|'specialist'|'admin'",
      "profileImageUrl": "string|null",
      "activeRole": "string",
      "accessibleRoles": "string[]"
    }
  },
  {
    "method": "POST",
    "endpoint": "/api/auth/switch-role",
    "auth": true,
    "description": "åˆ‡æ›è§’è‰²",
    "request": {
      "targetRole": "'traveler'|'merchant'|'specialist'|'admin'"
    },
    "response": {
      "success": true,
      "activeRole": "string",
      "token": "string (æ–° JWT)"
    }
  },
  {
    "method": "GET",
    "endpoint": "/api/auth/privileges",
    "auth": true,
    "description": "å–å¾—ç”¨æˆ¶æ¬Šé™",
    "request": null,
    "response": {
      "role": "string",
      "isApproved": "boolean",
      "isSuperAdmin": "boolean",
      "accessibleRoles": "string[]"
    }
  },
  {
    "method": "POST",
    "endpoint": "/api/auth/logout",
    "auth": true,
    "description": "ç™»å‡º",
    "request": null,
    "response": { "success": true }
  }
]
2. ç”¨æˆ¶ User (6 endpoints)
[
  {
    "method": "GET",
    "endpoint": "/api/profile",
    "auth": true,
    "description": "å–å¾—å€‹äººè³‡æ–™",
    "request": null,
    "response": {
      "id": "string",
      "email": "string",
      "firstName": "string|null",
      "lastName": "string|null",
      "gender": "'male'|'female'|'other'|null",
      "birthDate": "string|null (ISO date)",
      "phone": "string|null",
      "dietaryRestrictions": "string[]|null",
      "medicalHistory": "string[]|null",
      "emergencyContactName": "string|null",
      "emergencyContactPhone": "string|null",
      "emergencyContactRelation": "string|null",
      "preferredLanguage": "'zh-TW'|'en'|'ja'|'ko'"
    }
  },
  {
    "method": "PATCH",
    "endpoint": "/api/profile",
    "auth": true,
    "description": "æ›´æ–°å€‹äººè³‡æ–™",
    "request": {
      "firstName": "string (optional)",
      "lastName": "string (optional)",
      "gender": "'male'|'female'|'other' (optional)",
      "birthDate": "string ISO date (optional)",
      "phone": "string (optional)",
      "dietaryRestrictions": "string[] (optional)",
      "medicalHistory": "string[] (optional)",
      "emergencyContactName": "string (optional)",
      "emergencyContactPhone": "string (optional)",
      "emergencyContactRelation": "string (optional)",
      "preferredLanguage": "'zh-TW'|'en'|'ja'|'ko' (optional)"
    },
    "response": { "success": true, "profile": "{...}" }
  },
  {
    "method": "DELETE",
    "endpoint": "/api/user/account",
    "auth": true,
    "description": "åˆªé™¤å¸³è™Ÿ",
    "request": null,
    "response": { "success": true, "message": "å¸³è™Ÿå·²æˆåŠŸåˆªé™¤" }
  },
  {
    "method": "GET",
    "endpoint": "/api/user/sos-link",
    "auth": true,
    "description": "å–å¾— SOS é€£çµ",
    "request": null,
    "response": {
      "sosLink": "string (å®Œæ•´ URL)",
      "sosKey": "string (64 å­—å…ƒå¯†é‘°)"
    }
  },
  {
    "method": "POST",
    "endpoint": "/api/user/sos-key/regenerate",
    "auth": true,
    "description": "é‡æ–°ç”¢ç”Ÿ SOS Key",
    "request": null,
    "response": {
      "success": true,
      "sosKey": "string (æ–°çš„ 64 å­—å…ƒå¯†é‘°)",
      "sosLink": "string (æ–°çš„å®Œæ•´ URL)"
    }
  },
  {
    "method": "POST",
    "endpoint": "/api/location/update",
    "auth": true,
    "description": "æ›´æ–°ç”¨æˆ¶ä½ç½®",
    "request": {
      "lat": "number (required)",
      "lng": "number (required)"
    },
    "response": { "success": true }
  }
]
3. æ‰­è›‹ Gacha (9 endpoints)
[
  {
    "method": "POST",
    "endpoint": "/api/gacha/itinerary/v3",
    "auth": "optional (ç™»å…¥ç”¨æˆ¶æœƒè¿½è¹¤æ¯æ—¥æ¬¡æ•¸)",
    "description": "â­ ç”Ÿæˆ AI è¡Œç¨‹ (ä¸»è¦ API)",
    "request": {
      "regionId": "number (å„ªå…ˆä½¿ç”¨)",
      "countryId": "number (è‹¥ç„¡ regionId)",
      "itemCount": "number 1-15 (é è¨­ 7)",
      "pace": "'relaxed'|'moderate'|'packed' (optional)",
      "language": "string (optional)"
    },
    "response": {
      "success": true,
      "itinerary": [
        {
          "timeSlot": "'breakfast'|'morning'|'lunch'|'afternoon'|'dinner'|'evening'",
          "place": {
            "id": "number",
            "placeName": "string",
            "category": "string",
            "subcategory": "string|null",
            "description": "string|null",
            "address": "string|null",
            "rating": "number|null",
            "locationLat": "number|null",
            "locationLng": "number|null",
            "googlePlaceId": "string|null"
          },
          "couponWon": {
            "id": "number",
            "title": "string",
            "code": "string",
            "terms": "string|null"
          }
        }
      ],
      "couponsWon": [
        {
          "couponId": "number",
          "placeId": "number",
          "placeName": "string",
          "title": "string",
          "code": "string",
          "terms": "string|null"
        }
      ],
      "meta": {
        "city": "string",
        "district": "string|null",
        "dailyLimit": "number (36)",
        "dailyPullCount": "number",
        "remainingQuota": "number",
        "sortingMethod": "'coordinate'|'ai_reordered'",
        "categoryDistribution": "Record<string, number>"
      },
      "themeIntro": "string (AI ç”Ÿæˆçš„ä¸€å¥è©±è¡Œç¨‹ä»‹ç´¹)"
    }
  },
  {
    "method": "POST",
    "endpoint": "/api/generate-itinerary",
    "auth": false,
    "description": "ç”Ÿæˆè¡Œç¨‹ (è¨ªå®¢æ¨¡å¼)",
    "request": {
      "regionId": "number (optional)",
      "countryId": "number (optional)",
      "level": "number 1-10 (required)",
      "language": "'zh-TW'|'ja'|'ko'|'en' (required)",
      "collectedNames": "string[] (optional)"
    },
    "response": {
      "data": {
        "items": [
          {
            "name": "string",
            "nameEn": "string",
            "category": "string",
            "subCategory": "string",
            "rarity": "'SP'|'SSR'|'SR'|'S'|'R'",
            "description": "string",
            "address": "string",
            "lat": "number",
            "lng": "number",
            "rating": "number",
            "coupon": { "id": "number", "title": "string", "code": "string", "discount": "string" }
          }
        ],
        "totalItems": "number",
        "targetDistrict": "string",
        "city": "string",
        "country": "string",
        "districtId": "number",
        "generatedAt": "string ISO timestamp"
      }
    }
  },
  {
    "method": "POST",
    "endpoint": "/api/gacha/pull/v3",
    "auth": true,
    "description": "æŠ½å¡ v3",
    "request": {
      "regionId": "number (required)",
      "count": "number 1-15 (optional, default 7)"
    },
    "response": {
      "success": true,
      "places": ["... (same as itinerary/v3)"]
    }
  },
  {
    "method": "GET",
    "endpoint": "/api/gacha/pool",
    "auth": false,
    "description": "çæ± é è¦½",
    "query": {
      "regionId": "number (optional)",
      "city": "string (optional)"
    },
    "response": {
      "success": true,
      "pool": {
        "city": "string",
        "jackpots": [{ "id": "number", "placeName": "string", "category": "string", "rating": "string|null" }],
        "totalInPool": "number",
        "jackpotCount": "number"
      }
    }
  },
  {
    "method": "GET",
    "endpoint": "/api/gacha/pool/:city",
    "auth": false,
    "description": "åŸå¸‚çæ± "
  },
  {
    "method": "GET",
    "endpoint": "/api/gacha/pool/:city/:district",
    "auth": false,
    "description": "å€åŸŸçæ± "
  },
  {
    "method": "GET",
    "endpoint": "/api/gacha/prize-pool",
    "auth": false,
    "description": "çæ± è©³ç´°è³‡è¨Š"
  },
  {
    "method": "POST",
    "endpoint": "/api/gacha/itinerary",
    "auth": false,
    "description": "ç”Ÿæˆè¡Œç¨‹ (èˆŠç‰ˆ)"
  },
  {
    "method": "POST",
    "endpoint": "/api/gacha/pull",
    "auth": false,
    "description": "æŠ½å¡ (èˆŠç‰ˆ)"
  }
]
4. æ”¶è— Collection (4 endpoints)
[
  {
    "method": "GET",
    "endpoint": "/api/collections",
    "auth": true,
    "description": "å–å¾—æ”¶è—åˆ—è¡¨",
    "response": {
      "collections": [
        {
          "id": "number",
          "placeName": "string",
          "country": "string",
          "city": "string",
          "district": "string|null",
          "category": "string|null",
          "subcategory": "string|null",
          "description": "string|null",
          "address": "string|null",
          "rating": "string|null",
          "locationLat": "string|null",
          "locationLng": "string|null",
          "collectedAt": "string ISO timestamp"
        }
      ]
    }
  },
  {
    "method": "GET",
    "endpoint": "/api/collection/with-promo",
    "auth": true,
    "description": "å–å¾—æ”¶è— (å«å„ªæƒ ç‹€æ…‹)",
    "response": {
      "collections": [
        {
          "...same as above...",
          "isCoupon": "boolean",
          "couponData": "object|null",
          "hasPromo": "boolean",
          "isNew": "boolean"
        }
      ],
      "total": "number",
      "hasPromoItems": "boolean"
    }
  },
  {
    "method": "POST",
    "endpoint": "/api/collections",
    "auth": true,
    "description": "æ–°å¢æ”¶è—",
    "request": {
      "placeName": "string (required)",
      "country": "string (required)",
      "city": "string (required)",
      "district": "string (optional)",
      "category": "string (optional)",
      "subcategory": "string (optional)",
      "description": "string (optional)",
      "address": "string (optional)",
      "rating": "string (optional)",
      "locationLat": "string (optional)",
      "locationLng": "string (optional)"
    },
    "response": { "success": true, "collection": "{...}" }
  },
  {
    "method": "POST",
    "endpoint": "/api/collection/auto-save",
    "auth": true,
    "description": "è‡ªå‹•å„²å­˜æ”¶è—",
    "request": "same as POST /api/collections",
    "response": { "success": true, "isNew": "boolean", "collection": "{...}" }
  }
]
5. é“å…·ç®± Inventory (6 endpoints)
[
  {
    "method": "GET",
    "endpoint": "/api/inventory",
    "auth": true,
    "description": "å–å¾—é“å…·ç®±",
    "response": {
      "items": [
        {
          "id": "number",
          "type": "'coupon'|'item'",
          "name": "string",
          "description": "string|null",
          "rarity": "'SP'|'SSR'|'SR'|'S'|'R'",
          "isRead": "boolean",
          "isRedeemed": "boolean",
          "expiresAt": "string|null",
          "obtainedAt": "string",
          "couponData": {
            "code": "string",
            "merchantName": "string",
            "terms": "string"
          }
        }
      ],
      "slotCount": "number",
      "maxSlots": 30
    }
  },
  {
    "method": "GET",
    "endpoint": "/api/inventory/:id",
    "auth": true,
    "description": "å–å¾—å–®ä¸€é“å…·"
  },
  {
    "method": "POST",
    "endpoint": "/api/inventory/:id/read",
    "auth": true,
    "description": "æ¨™è¨˜é“å…·å·²è®€",
    "response": { "success": true }
  },
  {
    "method": "POST",
    "endpoint": "/api/inventory/:id/redeem",
    "auth": true,
    "description": "å…Œæ›å„ªæƒ åˆ¸",
    "response": {
      "success": true,
      "redemptionCode": "string",
      "expiresAt": "string"
    }
  },
  {
    "method": "DELETE",
    "endpoint": "/api/inventory/:id",
    "auth": true,
    "description": "åˆªé™¤é“å…·",
    "response": { "success": true }
  },
  {
    "method": "GET",
    "endpoint": "/api/inventory/config",
    "auth": false,
    "description": "é“å…·ç®±è¨­å®š",
    "response": { "maxSlots": 30 }
  }
]
6. é€šçŸ¥ Notifications (2 endpoints)
[
  {
    "method": "GET",
    "endpoint": "/api/notifications",
    "auth": true,
    "description": "å–å¾—æœªè®€æ•¸é‡",
    "response": {
      "unread": {
        "collection": "number",
        "itembox": "number",
        "announcement": "number"
      },
      "total": "number"
    }
  },
  {
    "method": "POST",
    "endpoint": "/api/notifications/:type/seen",
    "auth": true,
    "description": "æ¨™è¨˜é€šçŸ¥å·²è®€",
    "params": { "type": "'collection'|'itembox'|'announcement'" },
    "response": { "success": true }
  }
]
7. åœ°ç†è³‡è¨Š Locations (4 endpoints)
[
  {
    "method": "GET",
    "endpoint": "/api/locations/countries",
    "auth": false,
    "description": "åœ‹å®¶åˆ—è¡¨",
    "response": {
      "countries": [{ "id": "number", "name": "string", "code": "string" }]
    }
  },
  {
    "method": "GET",
    "endpoint": "/api/locations/regions/:countryId",
    "auth": false,
    "description": "ç¸£å¸‚åˆ—è¡¨",
    "response": {
      "regions": [{ "id": "number", "name": "string", "countryId": "number" }]
    }
  },
  {
    "method": "GET",
    "endpoint": "/api/locations/districts/:regionId",
    "auth": false,
    "description": "é„‰é®å€åˆ—è¡¨",
    "response": {
      "districts": [{ "id": "number", "name": "string", "regionId": "number" }]
    }
  },
  {
    "method": "GET",
    "endpoint": "/api/locations/districts/country/:countryId",
    "auth": false,
    "description": "åœ‹å®¶å…¨éƒ¨å€åŸŸ"
  }
]
8. åˆ†é¡ Categories (2 endpoints)
[
  {
    "method": "GET",
    "endpoint": "/api/categories",
    "auth": false,
    "description": "åˆ†é¡åˆ—è¡¨ (å…«å¤§é¡)",
    "response": {
      "categories": [
        { "id": "number", "code": "string", "nameZh": "string", "nameEn": "string", "colorHex": "string" }
      ]
    }
  },
  {
    "method": "GET",
    "endpoint": "/api/categories/:categoryId/subcategories",
    "auth": false,
    "description": "å­åˆ†é¡åˆ—è¡¨",
    "response": {
      "subcategories": [
        { "id": "number", "code": "string", "nameZh": "string", "nameEn": "string" }
      ]
    }
  }
]
9. SOS å®‰å…¨ä¸­å¿ƒ (7 endpoints)
[
  {
    "method": "GET",
    "endpoint": "/api/sos/eligibility",
    "auth": true,
    "description": "æª¢æŸ¥ SOS è³‡æ ¼",
    "response": { "eligible": "boolean", "reason": "string (if not eligible)" }
  },
  {
    "method": "POST",
    "endpoint": "/api/sos/alert",
    "auth": true,
    "description": "ç™¼é€ SOS è­¦å ±",
    "request": {
      "lat": "number (optional)",
      "lng": "number (optional)",
      "message": "string (optional)"
    },
    "response": { "success": true, "alertId": "number" }
  },
  {
    "method": "GET",
    "endpoint": "/api/sos/alerts",
    "auth": true,
    "description": "è­¦å ±åˆ—è¡¨"
  },
  {
    "method": "PATCH",
    "endpoint": "/api/sos/alerts/:id/cancel",
    "auth": true,
    "description": "å–æ¶ˆè­¦å ±"
  },
  {
    "method": "POST",
    "endpoint": "/api/sos/trigger",
    "auth": false,
    "description": "Webhook è§¸ç™¼ SOS (å¤–éƒ¨ä½¿ç”¨)",
    "query": { "key": "string (SOS å¯†é‘°)" },
    "request": { "lat": "number (optional)", "lon": "number (optional)" }
  },
  {
    "method": "POST",
    "endpoint": "/api/sos/deactivate",
    "auth": true,
    "description": "é—œé–‰ SOS æ¨¡å¼"
  },
  {
    "method": "GET",
    "endpoint": "/api/location/me",
    "auth": true,
    "description": "å–å¾—æˆ‘çš„ä½ç½®"
  }
]
10. å•†å®¶ Merchant (14 endpoints)
[
  {
    "method": "GET",
    "endpoint": "/api/merchant",
    "auth": true,
    "description": "å–å¾—å•†å®¶è³‡è¨Š",
    "response": {
      "merchant": {
        "id": "number",
        "userId": "string",
        "businessName": "string",
        "status": "'pending'|'approved'|'rejected'",
        "merchantLevel": "'free'|'pro'|'premium'",
        "creditBalance": "number"
      }
    }
  },
  {
    "method": "POST",
    "endpoint": "/api/merchant/apply",
    "auth": true,
    "description": "ç”³è«‹å•†å®¶"
  },
  {
    "method": "GET",
    "endpoint": "/api/merchant/analytics",
    "auth": true,
    "description": "å•†å®¶åˆ†æ",
    "response": {
      "itineraryCardCount": "number",
      "couponStats": { "total": "number", "active": "number", "redeemed": "number" },
      "impressions": "number",
      "collectionClickCount": "number"
    }
  },
  {
    "method": "GET",
    "endpoint": "/api/merchant/coupons",
    "auth": true,
    "description": "å•†å®¶å„ªæƒ åˆ¸åˆ—è¡¨"
  },
  {
    "method": "POST",
    "endpoint": "/api/merchant/coupons",
    "auth": true,
    "description": "å»ºç«‹å„ªæƒ åˆ¸"
  },
  {
    "method": "PUT",
    "endpoint": "/api/merchant/coupons/:id",
    "auth": true,
    "description": "æ›´æ–°å„ªæƒ åˆ¸"
  },
  {
    "method": "DELETE",
    "endpoint": "/api/merchant/coupons/:id",
    "auth": true,
    "description": "åˆªé™¤å„ªæƒ åˆ¸"
  },
  {
    "method": "GET",
    "endpoint": "/api/merchant/redemption-code",
    "auth": true,
    "description": "å–å¾—æ ¸éŠ·ç¢¼"
  },
  {
    "method": "GET",
    "endpoint": "/api/merchant/subscription/plans",
    "auth": false,
    "description": "è¨‚é–±æ–¹æ¡ˆåˆ—è¡¨"
  },
  {
    "method": "POST",
    "endpoint": "/api/merchant/subscription/upgrade",
    "auth": true,
    "description": "å‡ç´šè¨‚é–±"
  },
  {
    "method": "POST",
    "endpoint": "/api/merchant/subscription/confirm",
    "auth": true,
    "description": "ç¢ºèªè¨‚é–±"
  },
  {
    "method": "GET",
    "endpoint": "/api/merchant/subscription",
    "auth": true,
    "description": "å–å¾—è¨‚é–±ç‹€æ…‹"
  },
  {
    "method": "POST",
    "endpoint": "/api/merchant/places/:linkId/upgrade",
    "auth": true,
    "description": "è¡Œç¨‹å¡å‡ç´š"
  },
  {
    "method": "POST",
    "endpoint": "/api/merchant/places/:linkId/upgrade/confirm",
    "auth": true,
    "description": "ç¢ºèªè¡Œç¨‹å¡å‡ç´š"
  }
]
11. å…¬å‘Š & å»£å‘Š (2 endpoints)
[
  {
    "method": "GET",
    "endpoint": "/api/announcements",
    "auth": false,
    "description": "å…¬å‘Šåˆ—è¡¨",
    "query": { "type": "'announcement'|'flash_event'|'holiday_event' (optional)" },
    "response": {
      "announcements": [
        {
          "id": "number",
          "type": "string",
          "title": "string",
          "content": "string",
          "imageUrl": "string|null",
          "linkUrl": "string|null",
          "priority": "number",
          "startDate": "string|null",
          "endDate": "string|null"
        }
      ]
    }
  },
  {
    "method": "GET",
    "endpoint": "/api/ads/placements",
    "auth": false,
    "description": "å»£å‘Šè¨­å®š",
    "query": { "platform": "'ios'|'android'|'all' (optional)" },
    "response": {
      "placements": [
        { "placementKey": "string", "adUnitId": "string", "frequency": "number", "isActive": "boolean" }
      ]
    }
  }
]
12. ç³»çµ± System (4 endpoints)
[
  {
    "method": "GET",
    "endpoint": "/api/health",
    "auth": false,
    "description": "å¥åº·æª¢æŸ¥",
    "response": { "status": "ok" }
  },
  {
    "method": "GET",
    "endpoint": "/api/config/mapbox",
    "auth": false,
    "description": "Mapbox è¨­å®š",
    "response": { "accessToken": "string" }
  },
  {
    "method": "GET",
    "endpoint": "/api/rarity-config",
    "auth": false,
    "description": "ç¨€æœ‰åº¦è¨­å®š (å…¬é–‹)",
    "response": {
      "configs": [{ "rarity": "string", "dropRate": "number", "colorHex": "string" }]
    }
  },
  {
    "method": "GET",
    "endpoint": "/api/place/promo",
    "auth": false,
    "description": "åœ°é»å„ªæƒ è³‡è¨Š",
    "query": { "placeName": "string", "district": "string", "city": "string" }
  }
]
13. ç®¡ç†å¾Œå° Admin (25+ endpoints)
[
  { "method": "GET", "endpoint": "/api/admin/users", "auth": true, "description": "ç”¨æˆ¶åˆ—è¡¨" },
  { "method": "GET", "endpoint": "/api/admin/users/pending", "auth": true, "description": "å¾…å¯©æ ¸ç”¨æˆ¶" },
  { "method": "PATCH", "endpoint": "/api/admin/users/:id/approve", "auth": true, "description": "å¯©æ ¸ç”¨æˆ¶" },
  { "method": "GET", "endpoint": "/api/admin/announcements", "auth": true, "description": "å…¬å‘Šç®¡ç†" },
  { "method": "POST", "endpoint": "/api/admin/announcements", "auth": true, "description": "æ–°å¢å…¬å‘Š" },
  { "method": "PATCH", "endpoint": "/api/admin/announcements/:id", "auth": true, "description": "æ›´æ–°å…¬å‘Š" },
  { "method": "DELETE", "endpoint": "/api/admin/announcements/:id", "auth": true, "description": "åˆªé™¤å…¬å‘Š" },
  { "method": "GET", "endpoint": "/api/admin/ads", "auth": true, "description": "å»£å‘Šç®¡ç†" },
  { "method": "POST", "endpoint": "/api/admin/ads", "auth": true, "description": "æ–°å¢å»£å‘Š" },
  { "method": "PATCH", "endpoint": "/api/admin/ads/:id", "auth": true, "description": "æ›´æ–°å»£å‘Š" },
  { "method": "DELETE", "endpoint": "/api/admin/ads/:id", "auth": true, "description": "åˆªé™¤å»£å‘Š" },
  { "method": "GET", "endpoint": "/api/admin/rarity-config", "auth": true, "description": "ç¨€æœ‰åº¦è¨­å®š" },
  { "method": "POST", "endpoint": "/api/admin/rarity-config", "auth": true, "description": "æ–°å¢ç¨€æœ‰åº¦" },
  { "method": "DELETE", "endpoint": "/api/admin/rarity-config/:id", "auth": true, "description": "åˆªé™¤ç¨€æœ‰åº¦" },
  { "method": "GET", "endpoint": "/api/admin/global-exclusions", "auth": true, "description": "å…¨åŸŸæ’é™¤" },
  { "method": "POST", "endpoint": "/api/admin/global-exclusions", "auth": true, "description": "æ–°å¢æ’é™¤" },
  { "method": "DELETE", "endpoint": "/api/admin/global-exclusions/:id", "auth": true, "description": "åˆªé™¤æ’é™¤" },
  { "method": "GET", "endpoint": "/api/admin/place-drafts", "auth": true, "description": "è‰ç¨¿åˆ—è¡¨" },
  { "method": "POST", "endpoint": "/api/admin/place-drafts", "auth": true, "description": "æ–°å¢è‰ç¨¿" },
  { "method": "PATCH", "endpoint": "/api/admin/place-drafts/:id", "auth": true, "description": "æ›´æ–°è‰ç¨¿" },
  { "method": "DELETE", "endpoint": "/api/admin/place-drafts/:id", "auth": true, "description": "åˆªé™¤è‰ç¨¿" },
  { "method": "POST", "endpoint": "/api/admin/place-drafts/:id/publish", "auth": true, "description": "ç™¼å¸ƒè‰ç¨¿" },
  { "method": "POST", "endpoint": "/api/admin/place-drafts/batch-publish", "auth": true, "description": "æ‰¹æ¬¡ç™¼å¸ƒ" },
  { "method": "POST", "endpoint": "/api/admin/place-cache/batch-review", "auth": true, "description": "æ‰¹æ¬¡å¯©æ ¸" },
  { "method": "GET", "endpoint": "/api/admin/place-cache/review-stats", "auth": true, "description": "å¯©æ ¸çµ±è¨ˆ" },
  { "method": "GET", "endpoint": "/api/admin/applications/pending", "auth": true, "description": "å¾…å¯©æ ¸ç”³è«‹" },
  { "method": "PATCH", "endpoint": "/api/admin/applications/:id/review", "auth": true, "description": "å¯©æ ¸ç”³è«‹" }
]
çµ±ä¸€éŒ¯èª¤æ ¼å¼
{
  "errorCode": "string (E1001, E2001, etc.)",
  "message": "string (éŒ¯èª¤è¨Šæ¯)"
}
éŒ¯èª¤ä»£ç¢¼å°ç…§è¡¨
ä»£ç¢¼	èªªæ˜
E1001	AUTH_REQUIRED - è«‹å…ˆç™»å…¥
E1002	AUTH_TOKEN_EXPIRED - ç™»å…¥å·²éæœŸ
E1003	AUTH_TOKEN_INVALID - ç„¡æ•ˆçš„ç™»å…¥æ†‘è­‰
E1004	INVALID_CREDENTIALS - é›»å­éƒµä»¶æˆ–å¯†ç¢¼éŒ¯èª¤
E1005	EMAIL_ALREADY_EXISTS - æ­¤é›»å­éƒµä»¶å·²è¢«è¨»å†Š
E1006	PENDING_APPROVAL - å¸³è™Ÿå¯©æ ¸ä¸­
E2001	GACHA_NO_CREDITS - æ‰­è›‹æ¬¡æ•¸ä¸è¶³
E3001	MISSING_LOCATION_ID - è«‹æä¾› regionId
E3005	NO_PLACES_AVAILABLE - è©²å€åŸŸæš«ç„¡æ™¯é»
E5001	VALIDATION_ERROR - è¼¸å…¥è³‡æ–™æ ¼å¼éŒ¯èª¤
E9001	SERVER_ERROR - ä¼ºæœå™¨éŒ¯èª¤