=== 前端同步指令 ===
【後端更新摘要】
將預設用戶角色從 consumer 改名為 traveler，與資料庫 schema 一致
【資料結構變更】
- UserRole 類型：'traveler' | 'merchant' | 'specialist' | 'admin'
- 預設角色：traveler（舊稱 consumer）
【前端需要的改動】
1. 將所有 role === 'consumer' 判斷改為 role === 'traveler'
2. 角色選擇 UI 中的文字改為「旅客 (Traveler)」
3. 路由保護邏輯更新
=== 指令結束 ===

2️⃣ 雙支付網關：Stripe + Recur
=== 前端同步指令 ===
【後端更新摘要】
商家儲值 API 現在支援 Stripe 和 Recur 兩種付款方式
【API 變更】
- POST /api/merchant/credits/purchase - 新增 provider 參數
【API 呼叫範例】
// 使用 Stripe 付款
const response = await fetch('https://gacha-travel--s8869420.replit.app/api/merchant/credits/purchase', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
    'Authorization': `Bearer ${token}`
  },
  body: JSON.stringify({
    amount: 500,           // 最低 100 點
    provider: 'stripe'     // 'stripe' | 'recur'
  })
});
// 回傳格式
{
  transactionId: number,
  amount: number,
  provider: 'stripe' | 'recur',
  checkoutUrl: string | null,  // Stripe 會返回付款頁面網址
  status: 'pending',
  message: string
}
【前端需要的改動】
1. 儲值頁面新增付款方式選擇：
   - 「使用 Stripe 付款」按鈕
   - 「使用 Recur 付款」按鈕
2. 點擊後呼叫 API 並帶入對應的 provider
3. 收到 checkoutUrl 後使用 Linking.openURL(checkoutUrl) 跳轉
=== 指令結束 ===

3️⃣ Twilio Chat Token API
=== 前端同步指令 ===
【後端更新摘要】
Twilio Chat Token API 改為 GET 方法，方便前端取得 token
【API 變更】
- GET /api/chat/token - 取得 Twilio Conversations token（原為 POST）
【API 呼叫範例】
// 取得聊天 token
const response = await fetch('https://gacha-travel--s8869420.replit.app/api/chat/token', {
  headers: { 'Authorization': `Bearer ${token}` }
});
// 回傳格式
{
  token: string,     // Twilio JWT token
  identity: string   // 用戶 ID
}
【前端需要的改動】
1. 將 POST 請求改為 GET
2. 使用返回的 token 初始化 Twilio Conversations SDK：
import { Client } from '@twilio/conversations';
const client = new Client(data.token);
await client.on('stateChanged', (state) => {
  if (state === 'initialized') {
    console.log('Chat client ready');
  }
});
【注意事項】
- 聊天功能使用 Twilio Conversations SDK，不是 Socket.IO
- Socket.IO 僅用於即時位置追蹤
=== 指令結束 ===